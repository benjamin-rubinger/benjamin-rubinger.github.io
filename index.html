<!DOCTYPE html>
<html>
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="image/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="image/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="image/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <script src="script/jquery-3.6.1.min.js"></script>
    <style>
        @font-face {
            font-family: "source_code_pro";
            src: url("font/SourceCodePro-Regular.otf");
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: "source_code_pro";
            src: url("font/SourceCodePro-Bold.otf");
            font-weight: bold;
            font-style: normal;
        }
        @font-face {
            font-family: "source_code_pro";
            src: url("font/SourceCodePro-It.otf");
            font-weight: normal;
            font-style: italic;
        }
        html {
            font-family: source_code_pro,monospace;
        }
        .dark {
            background-color: black;
            color: lightgray;
        }
        .light {
            background-color: lightgray;
            color: black;
        }
        button, input, select {
            background-color: inherit;
            color: inherit;
        }
        capitalize {
            text-transform: capitalize;
        }
        apostrophe {
            display: none;
        }
        .sundial-space {
            background-color: black;
            color: lightgray;
            width: 400px;
            height: 400px;
            position: relative;
            border: 1px solid gray;
        }
        .stellar-body {
            border-radius: 50%;
            position: absolute;
        }
        .star {
            background-color: white;
        }
        .stars .star {
            background-color: gray;
        }
        .sun {
            width: 20px;
            height: 20px;
            left: 190px;
            top: 190px;
            animation-name: geocentric;
            animation-duration: 20s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }
        @keyframes geocentric {
            from { transform: rotate(0deg) translateX(180px) rotate(0deg); }
            to { transform: rotate(360deg) translateX(180px) rotate(-360deg); }
        }
        .atmosphere {
            width: 250px;
            height: 250px;
            left: 75px;
            top: 75px;
            background-image: radial-gradient(blue 0%, transparent 100%);
        }
        .earth-night {
            background-color: darkgreen;
            width: 200px;
            height: 200px;
            left: 100px;
            top: 100px;
        }
        .earth-day {
            background-color: lightgreen;
            width: 200px;
            height: 200px;
            left: 100px;
            top: 100px;
            clip-path: content-box inset(200px 100px 200px 200px);
            animation-name: earth-rotation;
            animation-duration: 20s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }
        @keyframes earth-rotation {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .indicator {
            position: absolute;
            width: 6px;
            height: 40px;
            background-color: lightgray;
            left: 197px;
            top: 60px;
        }
        .shadow {
            position: absolute;
            width: 40px;
            height: 6px;
            background-color: black;
            left: 160px;
            top: 97px;
            transform-origin: right center;
            animation-name: shadow-sweep;
            animation-duration: 20s;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }
        @keyframes shadow-sweep {
            from { transform: rotate(0deg) scaleX(2); opacity: 0; }
            49.9% { opacity: 0; }
            50% { transform: rotate(180deg) scaleX(2); opacity: 1; }
            75% { transform: rotate(270deg) scaleX(0.25); opacity: 1; }
            99.9% { opacity: 1; }
            to { transform: rotate(360deg) scaleX(2); opacity: 0; }
        }
        .sunrise {
            position: absolute;
            left: 10px;
            top: 190px;
        }
        .morning {
            position: absolute;
            left: 25px;
            top: 75px;
        }
        .midday {
            position: absolute;
            left: 200px;
            top: 10px;
        }
        .evening {
            position: absolute;
            right: 10px;
            top: 75px;
        }
        .sunset {
            position: absolute;
            right: 10px;
            top: 190px;
        }
        .midnight {
            position: absolute;
            left: 200px;
            bottom: 10px;
        }
    </style>
    <title>benjamin rubinger</title>
</head>
<body class="dark">
    <h3>benjamin rubinger</h3>
    <p class="only-paragraph">github page</p>
    <div class="sundial-space">
        <div class="stars"></div>
        <div class="sun star stellar-body"></div>
        <div class="atmosphere stellar-body"></div>
        <div class="earth-night stellar-body"></div>
        <div class="earth-day stellar-body"></div>
        <div class="shadow"></div>
        <div class="indicator"></div>
        <div class="sunrise">sunrise</div>
        <div class="morning">morning</div>
        <div class="midday">midday</div>
        <div class="evening">evening</div>
        <div class="sunset">sunset</div>
        <div class="midnight">midnight</div>
    </div>
    <div class="interactive">
        <label for="date">choose a datetime</label>
        <input id="date" class="date" type="date" />
        <input id="time" class="time" type="time" step="1" />
        <label for="timezone">timezone offset from utc</label>
        <select id="timezone" class="timezone">
            <option>-12:00</option>
            <option>-11:00</option>
            <option>-10:00</option>
            <option>-09:30</option>
            <option>-09:00</option>
            <option>-08:00</option>
            <option>-07:00</option>
            <option>-06:00</option>
            <option>-05:00</option>
            <option>-04:00</option>
            <option>-03:30</option>
            <option>-03:00</option>
            <option>-02:00</option>
            <option>-01:00</option>
            <option>+00:00</option>
            <option>+01:00</option>
            <option>+02:00</option>
            <option>+03:00</option>
            <option>+03:30</option>
            <option>+04:00</option>
            <option>+04:30</option>
            <option>+05:00</option>
            <option>+05:30</option>
            <option>+05:45</option>
            <option>+06:00</option>
            <option>+06:30</option>
            <option>+07:00</option>
            <option>+08:00</option>
            <option>+08:45</option>
            <option>+09:00</option>
            <option>+09:30</option>
            <option>+10:00</option>
            <option>+10:30</option>
            <option>+11:00</option>
            <option>+12:00</option>
            <option>+12:45</option>
            <option>+13:00</option>
            <option>+14:00</option>
        </select>
        <button class="now">now</button>
    </div>
    <div class="datetime-formats">
        <div><span>browser default format</span>&nbsp;<span class="default"></span></div>
        <div><span>iso 8601</span>&nbsp;<span class="iso8601"></span></div>
    </div>
    <button class="dark">dark</button>
    <button class="light">light</button>
    <script>
        function formatDateTime() {
            console.log("format date time");
            const dateString = $('input.date').val();
            console.log(dateString);
            const timeString = $('input.time').val();
            console.log(timeString);
            const offsetString = $('select.timezone').val();
            console.log(offsetString);
            const dateTimeString = dateString + 'T' + timeString + offsetString;
            let d = new Date(dateTimeString);
            console.log(d);
            const localeString = d.toString();
            $('.datetime-formats .default').text(localeString);
            const isoString = d.toISOString(); // this isnt good enough because it converts to utc
            $('.datetime-formats .iso8601').text(isoString);
        }

        function setNow() {
            let now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            const isoString = now.toISOString().slice(0, -1);
            // console.log(isoString);
            const tIndex = isoString.indexOf('T');
            const dateString = isoString.slice(0, tIndex);
            // console.log(dateString);
            const timeString = isoString.slice(tIndex + 1, isoString.length);
            // console.log(timeString);
            $('input.date').val(dateString);
            $('input.time').val(timeString);
            // console.log(now.getTimezoneOffset());
            const offsetRemainder = now.getTimezoneOffset() % 60;
            const offsetHours = (now.getTimezoneOffset() - offsetRemainder) / 60;
            let offsetHoursPrefix = '';
            if (Math.abs(offsetHours) < 10) {
                offsetHoursPrefix = '0';
            }
            let offsetMinutesPrefix = '';
            if (Math.abs(offsetRemainder) < 10) {
                offsetMinutesPrefix = '0';
            }
            let offsetPrefix = '-';
            if (offsetHours < 0) {
                offsetPrefix = '+';
            }
            const offset = offsetPrefix + offsetHoursPrefix + Math.abs(offsetHours).toString() + ':' + offsetMinutesPrefix + Math.abs(offsetRemainder).toString();
            console.log(offset);
            $('select.timezone').val(offset);
            formatDateTime();
        }

        function stars(n) {
            const $starSpace = $('.sundial-space .stars');
            for (let i = 0; i < n; i++) {
                const $star = $('<div>').addClass('stellar-body star star' + i);
                const diameter = Math.floor((Math.random() * 4) + 1);
                $star.css('width', diameter + 'px');
                $star.css('height', diameter + 'px');
                const left = Math.floor((Math.random() * (400 - (diameter * 2))) + diameter);
                const top = Math.floor((Math.random() * (400 - (diameter * 2))) + diameter);
                $star.css('left', left + 'px');
                $star.css('top', top + 'px');
                $starSpace.append($star);
            }
        }

        function toggleSundial() {
            const $sundialAnimations = $('.sundial-space .sun, .sundial-space .earth-day, .sundial-space .shadow');
            if ($sundialAnimations.css('animation-play-state') === 'running') {
                $sundialAnimations.css('animation-play-state', 'paused');
            } else {
                $sundialAnimations.css('animation-play-state', 'running');
            }
        }

        function setDark() {
            $('body').addClass('dark').removeClass('light');
        }

        function setLight() {
            $('body').addClass('light').removeClass('dark');
        }

        function initialize() {
            // $body.find("p.only-paragraph").text("modified by jquery");
            setNow();
            stars(80);
        }

        const $body = $('body');
        $(() => initialize());
        $body.on('input change', 'input.date, input.time, select.timezone', formatDateTime);
        $body.on('click', '.sundial-space', toggleSundial);
        $body.on('click', 'button.now', setNow);
        $body.on('click', 'button.dark', setDark);
        $body.on('click', 'button.light', setLight);
    </script>
</body>
</html>
